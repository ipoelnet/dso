function cLog(t=null){console.log(t);return;}
function attr(trname=null,atr=false){if(trname!=null){if(typeof atr!==typeof undefined&&atr!==false&&atr!=''){return trname+'="'+atr+'"';}
else{return '';}}}
function tonumformat(va,format,next=false){var str=""+va,pad=format,ans;if(!next){ans=pad.substring(0,pad.length-str.length)+str;}
else{ans=str+pad.substring(0,pad.length-str.length);}
return ans;}
function regexDate(input){var a=input.match('/^(0?[1-9]|[12][0-9]|3[01])[./-](0?[1-9]|1[012])[./-]\d{4}$/');if(Array.isArray(a)){a=a[0];}
else{a=null;}
return a;}
function ERR(jqXHR=null,exception=null){var msg='';if(jqXHR.status===0){msg=dsolang.ERR_0;}
else if(jqXHR.status==404){msg=dsolang.ERR_400;}
else if(jqXHR.status==500){msg=dsolang.ERR_500;}
else if(exception==='parsererror'){msg=dsolang.ERR_PARSE;}
else if(exception==='timeout'){msg=dsolang.ERR_TIMEOUT;}
else if(exception==='abort'){msg=dsolang.ERR_ABORT;}
else{msg=dsolang.ERR_UNCAUGHT+jqXHR.responseText;}
return msg;}
function js_alert(theme,text){var x=document.getElementById('alert');if(x){setTimeout(function(){x.remove();},250);}
return '<div class="alert alert-'+theme+' alert-dismissable fade in" id="alert">'+'<a href="#" class="close" data-dismiss="alert" aria-label="close">&times;</a>'+text+'</div>';}
function inTanggal(tanggal){var dateAr=tanggal.split('-');var newDate=dateAr[2]+'.'+dateAr[1]+'.'+dateAr[0];return newDate;}
function toTanggal(tanggal){var dateAr=tanggal.split('/');var newDate=dateAr[0]+'.'+dateAr[1]+'.'+dateAr[2];return newDate;}
function nowTanggal(){var now=new Date();var day=("0"+now.getDate()).slice(-2);var month=("0"+(now.getMonth()+1)).slice(-2);var today=(day)+"."+(month)+"."+now.getFullYear();return today;}
function validForm(form){var error=0;$(form+" [valid='true']").each(function(){var value=$(this).val();if(!value){$(this).css({"background-color":"#ffccca"});error++;}});return error;};(function($){function attrs(el){var rDataAttr=/^i\-(\w+)$/;var attrs={};$.each(el.attributes,function(index,attr){if(rDataAttr.test(attr.nodeName)){attrs[rDataAttr.exec(attr.nodeName)[1]]=attr.value;}});return attrs;}})(jQuery);(function($){$.inputColor=function(target,opt){var plug=this,$elm=$(target),defaults={bgdef:'',bgfocus:''}
var _init=function(){plug.opt=$.extend({},defaults,opt);$elm.on('focus',function(){$elm.css({"background-color":"#bbefff","border-radius":"0px"})}).on('blur',function(){$elm.css({"background-color":"#fff","border-radius":"3px"})})}
_init();}
$.fn.dsoiFocus=function(opt){return this.each(function(){if($(this).data('dsoiFocus')==undefined){var plug=new $.inputColor(this,opt);$(this).data('dsoiFocus',plug);}});}
$.fn.NumericOnly=function(){return this.each(function(){$(this).keydown(function(e){var key=e.charCode||e.keyCode||0;return(key==8||key==9||key==13||key==46||key==110||key==190||(key>=35&&key<=40)||(key>=48&&key<=57)||(key>=96&&key<=105));});});};$.fn.dsoNode=function(set){var dev={classname:'',varname:'',target:'',data:''};var opt=$.extend(dev,set),elm=$(this),target=elm;if(opt.target){target=opt.target;}
$('.'+opt.classn).remove();$('<script>').attr('type','text/javascript').attr('class',opt.classname).text('var '+opt.varname+'='+opt.data).appendTo(target);};})(jQuery);(function($){$.fn.dsoTableButton=function(set){var dev={btn:''};var opt=$.extend(dev,set);var elm=$(this);var cbtn;var tambah=button("tbbj-tambah","Tambah Data","plus","",'create'),edit=button("tbbj-edit","Edit Data","pencil","disabled",'update'),adjs=button("tbbj-adjs","Adjusment Stock","flash","disabled",'adjs'),hapus=button("tbbj-hapus","Hapus Data","minus","disabled",'delete'),duplikat=button("tbbj-duplikat","Duplikat Data","duplicate","disabled",'duplicate');switch(opt.btn){case 'a':cbtn=tambah+edit+hapus+duplikat+adjs;break;default:cbtn=tambah+edit+hapus+duplikat;break;}
elm.append(function(){return cbtn;});return this;};function button(id,title,gicon,aktif,bevent){return '<button type="button" class="btn btn-default btn-sm dso-adm" id="'+id+'" style="margin:-1px 0 0 4px;" dso="tips" title="'+title+'" '+aktif+' i-event="'+bevent+'"><span class="glyphicon glyphicon-'+gicon+'" aria-hidden="true"></span></button>';};}(jQuery));(function($){$.fn.dsoTableAction=function(options){var $=jQuery;$.each(this,function(){var dev={url:'',type:'POST',data:{},event:"click",success:function(){},error:function(){},before:function(){}};options=$.extend(dev,options);var event=options.event,$display=$("#popupadm");$(this).on(event,function(){var $el=$(this),$id=$el.attr("id"),$did=$(".rowselected").val();if(options.before){options.before.call(this);}
$.ajax({url:options.url+'?&dsoaksi='+$id+'&dataprimary='+$did,type:options.type,data:options.data,beforeSend:function(){$('body').faLoading();},success:function(data){$('body').faLoadingStop();$display.html(data).modal({backdrop:'static',keyboard:true});},error:function(data){$('body').faLoadingStop();$display.html(js_data_err(data)).modal({backdrop:'static',keyboard:true});}});});});return this;};$.fn.aProsesData=function(opt){$.each(this,function(){var dev={action:'',url:'',type:'POST',event:"click",data:{},frmid:$(".modal-dialog form").attr("id"),dtsid:dsoId.dts_id,focusid:'',before:function(){},done:function(){}};opt=$.extend(dev,opt);var event=opt.event,focusid=$('#'+opt.focusid);$(this).on(event,function(){var valid=validForm('#'+opt.frmid),btn=$(this),data=$('#'+opt.frmid).serialize();btn.button("loading");if(opt.action=='delete'){data=opt.data;}
if(opt.before){opt.before.call(this);}
if(valid===0&&opt.frmid){$.ajax({url:opt.url,type:opt.type,data:data,success:function(data){var refreshtabel=$('#'+opt.dtsid).dataTable();refreshtabel.fnClearTable();btn.button("reset");if(data=='1'){$(js_alert("success",dsolang.DSO_SAVED)).insertAfter('#'+opt.frmid);if(opt.done){opt.done.call(this);}}
else{$(js_alert('danger','Data <strong>'+focusid.val()+'</strong> gagal di proses')).insertAfter('#'+opt.frmid);}},error:function(jqXHR,exception){var msg=cLog(' ERR :'+ERR(jqXHR,exception));$(js_alert('danger',msg)).insertAfter('#'+opt.frmid);}});}
else{$(js_alert('danger',dsolang.ERR_VALIDATE)).insertAfter('#'+opt.frmid);btn.button("reset");}});});return this;};$.fn.loadVar=function(opt){$.each(this,function(){var dev={url:'',type:'POST',event:"blur",success:function(){},done:function(){},format:'000000',field:'',frmid:$(".modal-dialog form"),varjson:''};opt=$.extend(dev,opt);var event=opt.event;$(this).on(event,function(){var el=$(this),va=el.val();if(!va){va=1;el.val(va);}
var str=""+va,pad=opt.format,ans=pad.substring(0,pad.length-str.length)+str;el.val(ans);var q=ans+'.';$.ajax({url:opt.url,type:opt.type,data:{dataprimary:q,fieldprimary:opt.field},success:function(data){$('.'+opt.varjson).remove();$('<script>').attr('type','text/javascript').attr('class',opt.varjson).text('var '+opt.varjson+'='+data).appendTo(opt.frmid);if(opt.success){opt.success.call(this);}},error:function(jqXHR,exception){cLog(' ERR :'+ERR(jqXHR,exception));}});});});return this;};$.fn.dsoLoadPage=function(options){var $=jQuery,$loadspin=$('.dso-display'),$appdisplay=$('#dsoDisplay'),$appmodal=$('#popupadm');var dev={url:"",event:"click",id:false,callback:function(){}};var opt=$.extend(dev,options),event=opt.event,url=opt.url;$(this).on(event,function(){var $el=$(this),$elid=$(this).attr('id');if(opt.callback){opt.callback.call(this);}
if(opt.id){Cookies.set('dso-go',$elid,{expires:7});url=$elid.replace('_','/');url='/'+url;}
$loadspin.faLoading();$.get(url,function(data,status){if(status=='success'){if(data==404){$appmodal.html(js_data_err(data)).modal({backdrop:'static',keyboard:true});}
else{$appdisplay.html(data);}
$loadspin.faLoadingStop();}
else{$appmodal.html(js_data_err('System error...')).modal({backdrop:'static',keyboard:true});$loadspin.faLoadingStop();}});});return this;};$.fn.dsoDate=function(){$(this).on('blur',function(){var el=$(this),id=$(this).attr('id'),val=$(this).val();if(regexDate(val)!=null&&val.length>2){el.css({"background-color":"#fff"})}
else{el.css({"background-color":"#ffccca"})}});return this;};$.fn.dsoJsonArray=function(opt){var dev={url:"",data:{},event:"click",frmid:$(".modal-dialog form"),varjson:''};var opt=$.extend(dev,opt),event=opt.event,url=opt.url;$(this).on(event,function(){$.ajax({url:url,type:'POST',data:opt.data,success:function(data){$('.'+opt.varjson).remove();$('<script>').attr('type','text/javascript').attr('class',opt.varjson).text('var '+opt.varjson+'='+data).appendTo(opt.frmid);if(opt.success){opt.success.call(this);}},error:function(jqXHR,exception){cLog(' ERR :'+ERR(jqXHR,exception));}});});return this;};})(jQuery);(function(a){a.faLoadingDefaultIcon="fa-cog",a.fn.extend({faLoading:function(i){return(void 0===i||-1==i.indexOf("fa-"))&&(i=a.faLoadingDefaultIcon),a(this).each(function(){var n=a(this);n.css("position");n.append('<div class="fa-loading-wrapper"><div class="fa-loading-bg">&nbsp;</div><div class="fa-loading-icon-wrapper">   <i class="fa '+i+' fa-spin fa-loading-icon"></i></div></div>')})},faLoadingAdd:function(i){return a("<div>").faLoading(i).appendTo(a(this))},faLoadingStop:function(){return a(this).each(function(){a(this).find("div.fa-loading-wrapper").remove()})}})})(jQuery);(function($){$.extend({elementRender:function(){$('date').each(function(){var a=attrs(this),n='<input type="text" class="form-control text-center date" '+attr('name',a.name)+' '+attr('id',a.id)+' '+attr('value',a.val)+' autocomplete="off" placeholder"dd.mm.yyyy">',d='';if(typeof a.div!==typeof undefined&&a.div!==false){d+='<div '+attr('class',a.div)+'>'+n+'</div>';return $(this).replaceWith(d);}
else{return $(this).replaceWith(n);}});$('input[type="text"]').each(function(){var e=$(this);if(e.hasClass("date")){e.attr({'placeholder':'dd.mm.yyyy'});}
if(e.hasClass("number")){e.attr({'placeholder':'00.00'});}
if(e.hasClass("kodebarang")){e.attr({'placeholder':'00.0000'});}
if(e.hasClass("regcom")){e.attr({'placeholder':'000.000000.0'});}});$('.CTF').each(function(){var elm=$(this),elmh=elm.attr('cval');$(this).change(function(){if(this.checked){elm.val('T');$('#'+elmh).val('T');}
else{elm.val('F');$('#'+elmh).val('F');}});});$('.C01').each(function(){var elm=$(this),elmh=elm.attr('cval');$(this).change(function(){if(this.checked){elm.val(1);$('#'+elmh).val(1);}
else{elm.val(0);$('#'+elmh).val(0);}});});$.fn.formatter.addInptType('B',/[0-1]/);$('input[type="text"]').dsoiFocus();$('.number').number(true,2);$('.rekening').formatter({'pattern':'{{999}}.{{9999999}}'});$('.regcom').formatter({'pattern':'{{999}}.{{999999}}.{{9}}'});$('.kodebarang').formatter({'pattern':'{{99}}.{{9999}}'});$('.date').formatter({'pattern':'{{99}}.{{99}}.{{9999}}'}).dsoDate();$('.numeric').NumericOnly();$('.ppn').formatter({'pattern':'{{B}}'});}});})(jQuery);(function($){"use strict";$.fn.dsoSerachList=function(options,callback){var settings=$.extend({width:"500px",columns:[],hide:[false],onchange:null,norecord:dsolang.CTN_EMPTY,dataproperty:null,regex:"^[a-zA-Z0-9\b]+$",data:null,placeholder:null,ajax:null,delay:1,primary:1,iid:'',limit:10},options);var el={ddDiv:$("<div>",{class:"awhite"}),ddTable:$("<table></table>",{style:"width:"+settings.width}),ddTableCaption:$("<caption>"+settings.norecord+"</caption>"),ddTextbox:$("<input type='text'>")};var keys={UP:38,DOWN:40,ENTER:13,TAB:9,BACKSPACE:8};var errors={columnNA:"Error: Columns Not Defined",dataNA:"Error: Data Not Available"};var dsoSerachList={id:function(){return el.ddTextbox.data("ID");},text:function(){return el.ddTextbox.data("text");},searchdata:function(){return el.ddTextbox.val();},settext:function(text){el.ddTextbox.val(text);},isNull:function(){if(el.ddTextbox.data("text")==""||el.ddTextbox.data("text")==null)
return true;else return false;},all:function(){return selectedData;}};var delay=(function(){var timer=0;return function(callsback,ms){clearTimeout(timer);timer=setTimeout(callsback,ms);};})();var selectedData={};var focused=false;if(this.is(':focus')){focused=true;}
var cols=settings.columns.length;var orginalTextBox=this;this.wrap("<div class='acontainer'></div>");this.after(el.ddTextbox);el.ddTextbox.attr("id",settings.iid);el.ddTextbox.attr("autocomplete","off");el.ddTextbox.css("width",this.width+"px");el.ddTextbox.css("font-size",this.css("font-size"));el.ddTextbox.attr("placeholder",settings.placeholder);if(settings.columns==""||settings.columns==null){el.ddTextbox.attr("placeholder",errors.columnNA);}
else if((settings.data==""||settings.data==null)&&settings.ajax==null){el.ddTextbox.attr("placeholder",errors.dataNA);}
this.after(el.ddDiv);this.hide();el.ddDiv.append(el.ddTable);el.ddTable.attr("cellspacing","0");el.ddTable.append(el.ddTableCaption);var header="<thead><tr>";for(var i=0;i<=cols-1;i++){header=header+"<th>"+settings.columns[i]+"</th>"}
header=header+"</thead></tr>" 
 el.ddTable.append(header);{var id="",text="";if(this.val()!=""){var val=this.val().split("#$#");id=val[0];text=val[1];}
el.ddTextbox.attr("data-id",id);el.ddTextbox.attr("data-text",text);el.ddTextbox.val(text);}
if(focused){el.ddTextbox.focus();}
el.ddTextbox.keyup(function(e){if((e.keyCode<46||e.keyCode>105)&&(e.keyCode!=keys.BACKSPACE)){e.preventDefault();return;}
delay(function(){processInput();},settings.delay);});el.ddTextbox.keypress(function(event){var regex=new RegExp(settings.regex);var key=String.fromCharCode(!event.charCode? event.which:event.charCode);if(!regex.test(key)){event.preventDefault();return false;}});el.ddTextbox.keydown(function(e){var tbody=el.ddTable.find("tbody");var selected=tbody.find(".selected");if(e.keyCode==keys.ENTER){e.preventDefault();select();}
if(e.keyCode==keys.UP){el.ddTable.find(".selected").removeClass("selected");if(selected.prev().length==0){tbody.find("tr:last").addClass("selected");}
else{selected.prev().addClass("selected");}}
if(e.keyCode==keys.DOWN){tbody.find(".selected").removeClass("selected");if(selected.next().length==0){tbody.find("tr:first").addClass("selected");}
else{el.ddTable.find(".selected").removeClass("selected");selected.next().addClass("selected");}}});el.ddTable.delegate("tr","mousedown",function(){el.ddTable.find(".selected").removeClass("selected");$(this).addClass("selected");select();});el.ddTextbox.focusout(function(){hideDropDown();if($(this).val()!=$(this).data("text")){var change=true;if($(this).data("text")==""){change=false;}
$(this).data("text","");$(this).data("ID","");$(this).val("");orginalTextBox.val("");if(change){onChange();}}});function processInput(){var l=el.ddTextbox.val();if(l.length<2){hideDropDown();return;}
el.ddTableCaption.hide();el.ddTextbox.addClass("loading");if(settings.ajax!=null){var tempData=null;if($.isFunction(settings.ajax.data)){tempData=settings.ajax.data.call(this);}
else{tempData=settings.ajax.data;}
$.ajax({type:settings.ajax.type||'GET',dataType:'json',contentType:settings.ajax.contentType||'application/json; charset=utf-8',headers:settings.ajax.headers||{'Content-Type':'application/x-www-form-urlencoded'},data:tempData||null,url:settings.ajax.url,success:ajaxData,error:function(xhr,ajaxOptions,thrownError){el.ddTextbox.removeClass("loading");cLog('dsoSerachList: '+xhr.status||' - '||thrownError);}});}
else if($.isFunction(settings.data)){var data=settings.data.call(this);jsonParser(data);}
else{null;}}
function ajaxData(jsonData){if(settings.ajax.success==null||settings.ajax.success==""||(typeof settings.ajax.success==="undefined")){jsonParser(jsonData);}
else{if($.isFunction(settings.ajax.success)){var data=settings.ajax.success.call(this,jsonData);jsonParser(data);}}}
function select(){var selected=el.ddTable.find("tbody").find(".selected");el.ddTextbox.data("ID",selected.find('td').eq(0).text());el.ddTextbox.data("text",selected.find('td').eq(settings.primary).text());for(var i=0;i<cols;i++){selectedData[settings.columns[i]]=selected.find('td').eq(i).text();}
el.ddTextbox.val(selected.find('td').eq(settings.primary).text());orginalTextBox.val(selected.find('td').eq(0).text()+'#$#'+selected.find('td').eq(settings.primary).text());hideDropDown();onChange();el.ddTextbox.focus();}
function onChange(){if($.isFunction(settings.onchange)){settings.onchange.call(this);}
else{}}
function hideDropDown(){el.ddTable.hide();el.ddTextbox.removeClass("inputfocus");el.ddDiv.css("z-index","1");el.ddTableCaption.hide();}
function showDropDown(){var cssTop=(el.ddTextbox.height()+8)+"px 1px 0px 1px";var cssBottom="1px 1px "+(el.ddTextbox.height()+20)+"px 1px";el.ddDiv.css("top","0px");el.ddDiv.css("left","0px");el.ddTable.css("margin",cssTop);el.ddTextbox.addClass("inputfocus");el.ddDiv.css("z-index","999");el.ddTable.show();if(!isDivHeightVisible(el.ddDiv)){el.ddDiv.css("top",-1*(el.ddTable.height())+"px");el.ddTable.css("margin",cssBottom);if(!isDivHeightVisible(el.ddDiv)){el.ddDiv.css("top","0px");el.ddTable.css("margin",cssTop);$('html, body').animate({scrollTop:(el.ddDiv.offset().top-60)},250);}}
if(!isDivWidthVisible(el.ddDiv)){el.ddDiv.css("left","-"+(el.ddTable.width()-el.ddTextbox.width()-20)+"px");}}
function jsonParser(jsonData){try{el.ddTextbox.removeClass("loading");el.ddTable.find("tbody").find("tr").remove();var i=0,j=0;var row=null,cell=null;if(jsonData!=null){for(i=0;i<jsonData.length;i++){if(i>=settings.limit)
continue;var obj=jsonData[i];row="";j=0;for(var key in obj){if(j<=cols){cell=obj[key]+"";row=row+"<td>"+cell+"</td>";}
else{continue;}
j++;}
el.ddTable.append("<tr>"+row+"</tr>");}}
if(i==0)
el.ddTableCaption.show();for(var i=0;(i<settings.hide.length)&&(i<cols);i++){if(!settings.hide[i])
el.ddTable.find('td:nth-child('+(i+1)+')').hide();}
el.ddTable.find("tbody").find("tr:first").addClass('selected');showDropDown();}
catch(e){cLog("Error: "+e);}}
return dsoSerachList;};}(jQuery))
function isDivHeightVisible(elem){var docViewTop=$(window).scrollTop();var docViewBottom=docViewTop+$(window).height();var elemTop=$(elem).offset().top;var elemBottom=elemTop+$(elem).height();return((elemBottom>=docViewTop)&&(elemTop<=docViewBottom)&&(elemBottom<=docViewBottom)&&(elemTop>=docViewTop));}
function isDivWidthVisible(elem){var docViewLeft=$(window).scrollLeft();var docViewRight=docViewLeft+$(window).width();var elemLeft=$(elem).offset().left;var elemRight=elemLeft+$(elem).width();return((elemRight>=docViewLeft)&&(elemLeft<=docViewRight)&&(elemRight<=docViewRight)&&(elemLeft>=docViewLeft));}